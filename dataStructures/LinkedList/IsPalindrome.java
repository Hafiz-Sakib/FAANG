import java.util.ArrayList;
import java.util.List;

/**
 * Created on:  Nov 07, 2020
 * Questions:
 * Given a singly linked list of integers, determine whether or not it's a palindrome.
 * <p>
 * Note: in examples below and tests preview linked lists are presented as arrays just for simplicity of visualization: in real data you will be given a head node l of the linked list
 * <p>
 * Example
 * <p>
 * For l = [0, 1, 0], the output should be
 * isListPalindrome(l) = true;
 * <p>
 * For l = [1, 2, 2, 3], the output should be
 * isListPalindrome(l) = false.
 */

public class IsPalindrome {

    public static void main(String[] args) {
        ListNode listNode = createLongListNode();
        System.out.println("************************************ Naive *************************************");
        System.out.println(isListPalindrome_naive(listNode));
        System.out.println("************************************ Option 1 *************************************");
        System.out.println(isListPalindrome(LinkedListCycle.createListNode(new int[]{1, 1000000000, -1000000000, -1000000000, 1000000000, 1})));
        System.out.println(isListPalindrome(listNode));
        System.out.println("************************************ Option 2 *************************************");
        System.out.println(isListPalindrome_rev1(LinkedListCycle.createListNode(new int[]{1, 1000000000, -1000000000, -1000000000, 1000000000, 1})));
        System.out.println(isListPalindrome_rev1(listNode));
    }


    static boolean isListPalindrome_naive(ListNode l) {
        List<Long> list = new ArrayList<>();
        while (l != null) {
            list.add(Long.valueOf(l.val));
            l = l.next;
        }
        int start = 0, end = list.size() - 1;
        System.out.println("list   = " + list);
        while (start < end) {
            if (!list.get(start++).equals(list.get(end--))) {
                System.out.println("Invalid idx = " + (start - 1) + " Val = " + list.get(start - 1));
                return false;
            }
        }
        return true;
    }

    static boolean isListPalindrome_rev1(ListNode l) {
        int len = 0;
        ListNode dummy = l;
        while (dummy != null) {
            dummy = dummy.next;
            len++;
        }
        int mid = (len + 1) / 2, i = 0;
        ListNode advance = l;
        while (i < mid) {
            advance = advance.next;
            i++;
        }
        System.out.println("Advance = " + advance);
        ListNode reverse = reverse(advance);
        System.out.println("Reverse = " + reverse);
        System.out.println("Input   = " + l);
        while (reverse != null) {
            if (l.val != reverse.val) return false;
            l = l.next;
            reverse = reverse.next;
        }
        return true;
    }

    static boolean isListPalindrome(ListNode l) {
        ListNode cur = l;
//        ListNode reverse = reverse(l);
        ListNode reverse = reverseList2(l);
        System.out.println("Input   = " + cur);
        System.out.println("Reverse = " + reverse);
        while (cur != null) {
            if (cur.val != reverse.val) return false;
            cur = cur.next;
            reverse = reverse.next;
        }
        return true;
    }

    public static ListNode reverseList2(ListNode head) {
        ListNode output = new ListNode(-1), outputRef = output;
        while (head != null) {
            ListNode temp = outputRef.next;
            outputRef.next = new ListNode(head.val);
            outputRef.next.next = temp;
            head = head.next;
        }
        return output.next;
    }

    static ListNode reverse(ListNode head) {
        ListNode cur = head, next = null, op = null;
        while (cur != null) {
            next = cur.next;
            cur.next = op;
            op = cur;
            cur = next;
        }
        return op;
    }

    private static ListNode createLongListNode() {
        return LinkedListCycle.createListNode(new int[]{
                -748133533,
                -378146685,
                -37977898,
                501547898,
                -888577783,
                -504255025,
                547194335,
                653328117,
                596081821,
                989159270,
                908464,
                818501262,
                -795439098,
                -903348404,
                302636322,
                -242084974,
                436432568,
                794677564,
                505351297,
                914822680,
                -834874165,
                -333028669,
                693042566,
                -692175173,
                277567627,
                717078248,
                -353622830,
                970411665,
                -699484944,
                -555031450,
                956351384,
                991164337,
                -968658815,
                -568611062,
                765147564,
                966842087,
                -773813974,
                -807171073,
                -542353180,
                37466313,
                303438184,
                -20975189,
                577802342,
                -809416209,
                462643925,
                -812510939,
                -36286308,
                669702617,
                -947679588,
                224026126,
                903097357,
                -37946528,
                847172271,
                -448271620,
                -411832653,
                644282762,
                -928263205,
                140552908,
                462672949,
                -648765621,
                987197196,
                429625133,
                -847002020,
                746663890,
                -457129011,
                101592052,
                -250167745,
                -312344638,
                -569969919,
                383429411,
                -959098047,
                -875922594,
                -431635267,
                835240511,
                658205102,
                807090244,
                912982942,
                558975288,
                980561601,
                -758605856,
                -255951597,
                933685401,
                802836824,
                165830266,
                419752158,
                921933940,
                -665994470,
                436218341,
                816637752,
                -739799237,
                -955518017,
                -452179865,
                400635660,
                888327985,
                923916479,
                946728279,
                486197590,
                975444713,
                -105792066,
                -22753095,
                714640047,
                -201893695,
                614434202,
                566928086,
                619812816,
                -503852519,
                704787276,
                -279133880,
                -899979166,
                615076905,
                913531757,
                -393094481,
                -205304415,
                -546394292,
                -742366110,
                -905124642,
                126806126,
                -984667836,
                -145112861,
                -31685080,
                -816553287,
                91026973,
                259591669,
                419240557,
                527457204,
                425220359,
                592643705,
                -870562395,
                -547923042,
                -516984168,
                -230050910,
                -951090586,
                856751685,
                -639071739,
                -271173230,
                374189082,
                -580061616,
                974423903,
                538566779,
                -639042768,
                856649757,
                -858387539,
                175050367,
                457572235,
                -920223881,
                -704815704,
                555399769,
                -844616269,
                -791436541,
                96442999,
                111737340,
                735648799,
                -586882449,
                197112289,
                -455203304,
                161303222,
                442907029,
                -539471350,
                279415253,
                -350662446,
                601633487,
                823857784,
                829426700,
                871523890,
                370844731,
                419638149,
                -940276606,
                -455314098,
                360874537,
                -549224930,
                -293397762,
                798272684,
                -902782838,
                -144202277,
                258933630,
                451758920,
                -973118664,
                261966730,
                -225191245,
                -29843399,
                489985945,
                397063527,
                -928870772,
                238662107,
                -959215821,
                -993913441,
                41686153,
                -681287605,
                -267911232,
                -453182791,
                -687307972,
                -804866135,
                -242845951,
                648133238,
                -776225236,
                908781481,
                726685050,
                -337926982,
                -748651397,
                -257932882,
                106532986,
                160801222,
                43322371,
                -200053735,
                872756577,
                344970264,
                -361488546,
                298503521,
                -325297354,
                452833153,
                -888027847,
                938916595,
                846748890,
                -484893940,
                -51399795,
                -527887985,
                -594991874,
                -17215739,
                -487455670,
                -376966498,
                33571875,
                831341383,
                368135997,
                215878464,
                809527077,
                560450588,
                309361609,
                519403724,
                -911750144,
                362718663,
                -895072187,
                392453838,
                -55597986,
                -686220519,
                -68852219,
                -765337869,
                -978968952,
                46826260,
                -414822022,
                957969112,
                -838599972,
                -328556975,
                -580377936,
                -550171129,
                -359488182,
                -776595904,
                960304138,
                -977724724,
                944759195,
                289559041,
                -382775220,
                -882437175,
                192192426,
                -165661357,
                142521698,
                -700883848,
                197289215,
                -269590133,
                -575647322,
                -133486286,
                -627361286,
                -498971034,
                -606273680,
                -657840471,
                16199408,
                854578494,
                -692544117,
                395438743,
                -341615516,
                865032819,
                -410339541,
                -781993924,
                345424014,
                634406914,
                -143127383,
                -700531918,
                496682061,
                695367061,
                353457183,
                224011593,
                -929485260,
                726005584,
                307038571,
                -402321669,
                367126403,
                -315183671,
                -837790976,
                794911508,
                700185595,
                540365700,
                -478252045,
                -65622604,
                86083993,
                46567352,
                -664790880,
                774702708,
                -244714141,
                -261588795,
                -132350323,
                273922446,
                389631185,
                920209124,
                564768877,
                -432478632,
                -154651192,
                -645304388,
                664926641,
                514506387,
                990194984,
                599943791,
                739770385,
                -586277379,
                -821555346,
                -481361320,
                -930143906,
                344672614,
                297398421,
                -636215673,
                851527306,
                -505533446,
                -734439294,
                720485913,
                406896530,
                -920335717,
                533628162,
                564991929,
                -982822528,
                -377010326,
                -828015840,
                -304400112,
                -223542592,
                173984309,
                -526368185,
                -91573446,
                -847347651,
                -639269263,
                99723022,
                39469020,
                -46312066,
                90485925,
                914771227,
                -213248716,
                75092483,
                624965334,
                702528699,
                -985360045,
                436356715,
                -392145660,
                -742605473,
                293661848,
                -809560825,
                998487534,
                700565783,
                684232210,
                368494774,
                -852517366,
                804772547,
                -508035672,
                819624468,
                974341989,
                326414963,
                -788629954,
                599328401,
                54247409,
                847716042,
                88348771,
                -549768371,
                582126285,
                243642209,
                575252496,
                -960647624,
                -105906417,
                -576727076,
                -911228663,
                -267882485,
                -653592688,
                -290603285,
                -864578852,
                -501477166,
                -252625705,
                -285155375,
                188028382,
                -724892490,
                -594487703,
                812660746,
                363355377,
                103546355,
                233781862,
                642916000,
                -363198701,
                -440900834,
                -179211831,
                111374234,
                -719009961,
                214721606,
                152186756,
                -213199681,
                171256361,
                313781362,
                415452284,
                717614729,
                -853610284,
                -35495583,
                480814432,
                -860657053,
                282817429,
                -828836398,
                758820037,
                655900596,
                842384164,
                -895820842,
                958621446,
                -880612360,
                733164120,
                -878438864,
                913726988,
                392177313,
                112247627,
                -659985592,
                52177531,
                609117824,
                647546403,
                -617131058,
                571945568,
                -570492397,
                419073249,
                -632948027,
                164095009,
                -400716809,
                786228980,
                -646151865,
                -338339304,
                -975066801,
                -553511218,
                -109122053,
                184601687,
                -801960464,
                -100270921,
                -333699825,
                25915004,
                897680224,
                -932711660,
                906495110,
                165624824,
                73560825,
                607412724,
                -847003616,
                -63538209,
                -239387027,
                864900309,
                606543003,
                314445216,
                -796529496,
                -472514663,
                -941612279,
                -729604222,
                -197966036,
                28902848,
                -748119263,
                110940334,
                950263241,
                646898378,
                -702286040,
                666618605,
                -595408096,
                570331958,
                949512086,
                576492260,
                935035580,
                767278619,
                -482056896,
                -868863418,
                919117534,
                802390835,
                395458271,
                314774055,
                146970090,
                -33755577,
                830194612,
                697925538,
                89758062,
                346832347,
                -160380978,
                -379811904,
                72570656,
                -434089899,
                -368941054,
                890345359,
                -108507424,
                762334138,
                -850241130,
                79286893,
                -471485259,
                826438150,
                588168751,
                -339118550,
                587503773,
                -411452858,
                391228370,
                821825207,
                821825207,
                391228370,
                -411452858,
                587503773,
                -339118550,
                588168751,
                826438150,
                -471485259,
                79286893,
                -850241130,
                762334138,
                -108507424,
                890345359,
                -368941054,
                -434089899,
                72570656,
                -379811904,
                -160380978,
                346832347,
                89758062,
                697925538,
                830194612,
                -33755577,
                146970090,
                314774055,
                395458271,
                802390835,
                919117534,
                -868863418,
                -482056896,
                767278619,
                935035580,
                576492260,
                949512086,
                570331958,
                -595408096,
                666618605,
                -702286040,
                646898378,
                950263241,
                110940334,
                -748119263,
                28902848,
                -197966036,
                -729604222,
                -941612279,
                -472514663,
                -796529496,
                314445216,
                606543003,
                864900309,
                -239387027,
                -63538209,
                -847003616,
                607412724,
                73560825,
                165624824,
                906495110,
                -932711660,
                897680224,
                25915004,
                -333699825,
                -100270921,
                -801960464,
                184601687,
                -109122053,
                -553511218,
                -975066801,
                -338339304,
                -646151865,
                786228980,
                -400716809,
                164095009,
                -632948027,
                419073249,
                -570492397,
                571945568,
                -617131058,
                647546403,
                609117824,
                52177531,
                -659985592,
                112247627,
                392177313,
                913726988,
                -878438864,
                733164120,
                -880612360,
                958621446,
                -895820842,
                842384164,
                655900596,
                758820037,
                -828836398,
                282817429,
                -860657053,
                480814432,
                -35495583,
                -853610284,
                717614729,
                415452284,
                313781362,
                171256361,
                -213199681,
                152186756,
                214721606,
                -719009961,
                111374234,
                -179211831,
                -440900834,
                -363198701,
                642916000,
                233781862,
                103546355,
                363355377,
                812660746,
                -594487703,
                -724892490,
                188028382,
                -285155375,
                -252625705,
                -501477166,
                -864578852,
                -290603285,
                -653592688,
                -267882485,
                -911228663,
                -576727076,
                -105906417,
                -960647624,
                575252496,
                243642209,
                582126285,
                -549768371,
                88348771,
                847716042,
                54247409,
                599328401,
                -788629954,
                326414963,
                974341989,
                819624468,
                -508035672,
                804772547,
                -852517366,
                368494774,
                684232210,
                700565783,
                998487534,
                -809560825,
                293661848,
                -742605473,
                -392145660,
                436356715,
                -985360045,
                702528699,
                624965334,
                75092483,
                -213248716,
                914771227,
                90485925,
                -46312066,
                39469020,
                99723022,
                -639269263,
                -847347651,
                -91573446,
                -526368185,
                173984309,
                -223542592,
                -304400112,
                -828015840,
                -377010326,
                -982822528,
                564991929,
                533628162,
                -920335717,
                406896530,
                720485913,
                -734439294,
                -505533446,
                851527306,
                -636215673,
                297398421,
                344672614,
                -930143906,
                -481361320,
                -821555346,
                -586277379,
                739770385,
                599943791,
                990194984,
                514506387,
                664926641,
                -645304388,
                -154651192,
                -432478632,
                564768877,
                920209124,
                389631185,
                273922446,
                -132350323,
                -261588795,
                -244714141,
                774702708,
                -664790880,
                46567352,
                86083993,
                -65622604,
                -478252045,
                540365700,
                700185595,
                794911508,
                -837790976,
                -315183671,
                367126403,
                -402321669,
                307038571,
                726005584,
                -929485260,
                224011593,
                353457183,
                695367061,
                496682061,
                -700531918,
                -143127383,
                634406914,
                345424014,
                -781993924,
                -410339541,
                865032819,
                -341615516,
                395438743,
                -692544117,
                854578494,
                16199408,
                -657840471,
                -606273680,
                -498971034,
                -627361286,
                -133486286,
                -575647322,
                -269590133,
                197289215,
                -700883848,
                142521698,
                -165661357,
                192192426,
                -882437175,
                -382775220,
                289559041,
                944759195,
                -977724724,
                960304138,
                -776595904,
                -359488182,
                -550171129,
                -580377936,
                -328556975,
                -838599972,
                957969112,
                -414822022,
                46826260,
                -978968952,
                -765337869,
                -68852219,
                -686220519,
                -55597986,
                392453838,
                -895072187,
                362718663,
                -911750144,
                519403724,
                309361609,
                560450588,
                809527077,
                215878464,
                368135997,
                831341383,
                33571875,
                -376966498,
                -487455670,
                -17215739,
                -594991874,
                -527887985,
                -51399795,
                -484893940,
                846748890,
                938916595,
                -888027847,
                452833153,
                -325297354,
                298503521,
                -361488546,
                344970264,
                872756577,
                -200053735,
                43322371,
                160801222,
                106532986,
                -257932882,
                -748651397,
                -337926982,
                726685050,
                908781481,
                -776225236,
                648133238,
                -242845951,
                -804866135,
                -687307972,
                -453182791,
                -267911232,
                -681287605,
                41686153,
                -993913441,
                -959215821,
                238662107,
                -928870772,
                397063527,
                489985945,
                -29843399,
                -225191245,
                261966730,
                -973118664,
                451758920,
                258933630,
                -144202277,
                -902782838,
                798272684,
                -293397762,
                -549224930,
                360874537,
                -455314098,
                -940276606,
                419638149,
                370844731,
                871523890,
                829426700,
                823857784,
                601633487,
                -350662446,
                279415253,
                -539471350,
                442907029,
                161303222,
                -455203304,
                197112289,
                -586882449,
                735648799,
                111737340,
                96442999,
                -791436541,
                -844616269,
                555399769,
                -704815704,
                -920223881,
                457572235,
                175050367,
                -858387539,
                856649757,
                -639042768,
                538566779,
                974423903,
                -580061616,
                374189082,
                -271173230,
                -639071739,
                856751685,
                -951090586,
                -230050910,
                -516984168,
                -547923042,
                -870562395,
                592643705,
                425220359,
                527457204,
                419240557,
                259591669,
                91026973,
                -816553287,
                -31685080,
                -145112861,
                -984667836,
                126806126,
                -905124642,
                -742366110,
                -546394292,
                -205304415,
                -393094481,
                913531757,
                615076905,
                -899979166,
                -279133880,
                704787276,
                -503852519,
                619812816,
                566928086,
                614434202,
                -201893695,
                714640047,
                -22753095,
                -105792066,
                975444713,
                486197590,
                946728279,
                923916479,
                888327985,
                400635660,
                -452179865,
                -955518017,
                -739799237,
                816637752,
                436218341,
                -665994470,
                921933940,
                419752158,
                165830266,
                802836824,
                933685401,
                -255951597,
                -758605856,
                980561601,
                558975288,
                912982942,
                807090244,
                658205102,
                835240511,
                -431635267,
                -875922594,
                -959098047,
                383429411,
                -569969919,
                -312344638,
                -250167745,
                101592052,
                -457129011,
                746663890,
                -847002020,
                429625133,
                987197196,
                -648765621,
                462672949,
                140552908,
                -928263205,
                644282762,
                -411832653,
                -448271620,
                847172271,
                -37946528,
                903097357,
                224026126,
                -947679588,
                669702617,
                -36286308,
                -812510939,
                462643925,
                -809416209,
                577802342,
                -20975189,
                303438184,
                37466313,
                -542353180,
                -807171073,
                -773813974,
                966842087,
                765147564,
                -568611062,
                -968658815,
                991164337,
                956351384,
                -555031450,
                -699484944,
                970411665,
                -353622830,
                717078248,
                277567627,
                -692175173,
                693042566,
                -333028669,
                -834874165,
                914822680,
                505351297,
                794677564,
                436432568,
                -242084974,
                302636322,
                -903348404,
                -795439098,
                818501262,
                908464,
                989159270,
                596081821,
                653328117,
                547194335,
                -504255025,
                -888577783,
                501547898,
                -37977898,
                -378146685,
                -748133533
        });
    }
}
